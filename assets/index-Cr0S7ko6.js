const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-54ZA-14y.js","assets/index-CituUIcr.js","assets/index-AITKqKoE.css","assets/ChartsWrapper-JJM1p5qL.js"])))=>i.map(i=>d[i]);
import{g as ne,r as y,a as ae,f as ie,j as o,I as ue,M as ce,b as G,c as Q,G as oe,P as le,_ as he}from"./index-CituUIcr.js";import{m as fe,T as de,a as me,B as $e,b as ge,c as ve,d as pe,e as K,f as q,g as xe,h as ye,i as Me}from"./index-ojhfIXZy.js";var V={exports:{}},be=V.exports,X;function we(){return X||(X=1,function(S,T){(function(j,$){S.exports=$()})(be,function(){var j=1e3,$=6e4,O=36e5,w="millisecond",M="second",p="minute",h="hour",b="day",Y="week",u="month",D="quarter",_="year",A="date",z="Invalid Date",ee=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,te=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var s=["th","st","nd","rd"],e=n%100;return"["+n+(s[(e-20)%10]||s[e]||s[0])+"]"}},W=function(n,s,e){var r=String(n);return!r||r.length>=s?n:""+Array(s+1-r.length).join(e)+n},re={s:W,z:function(n){var s=-n.utcOffset(),e=Math.abs(s),r=Math.floor(e/60),t=e%60;return(s<=0?"+":"-")+W(r,2,"0")+":"+W(t,2,"0")},m:function n(s,e){if(s.date()<e.date())return-n(e,s);var r=12*(e.year()-s.year())+(e.month()-s.month()),t=s.clone().add(r,u),a=e-t<0,i=s.clone().add(r+(a?-1:1),u);return+(-(r+(e-t)/(a?t-i:i-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:u,y:_,w:Y,d:b,D:A,h,m:p,s:M,ms:w,Q:D}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},I="en",C={};C[I]=se;var J="$isDayjsObject",F=function(n){return n instanceof R||!(!n||!n[J])},L=function n(s,e,r){var t;if(!s)return I;if(typeof s=="string"){var a=s.toLowerCase();C[a]&&(t=a),e&&(C[a]=e,t=a);var i=s.split("-");if(!t&&i.length>1)return n(i[0])}else{var l=s.name;C[l]=s,t=l}return!r&&t&&(I=t),t||!r&&I},d=function(n,s){if(F(n))return n.clone();var e=typeof s=="object"?s:{};return e.date=n,e.args=arguments,new R(e)},c=re;c.l=L,c.i=F,c.w=function(n,s){return d(n,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var R=function(){function n(e){this.$L=L(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[J]=!0}var s=n.prototype;return s.parse=function(e){this.$d=function(r){var t=r.date,a=r.utc;if(t===null)return new Date(NaN);if(c.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(ee);if(i){var l=i[2]-1||0,f=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)}}return new Date(t)}(e),this.init()},s.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},s.$utils=function(){return c},s.isValid=function(){return this.$d.toString()!==z},s.isSame=function(e,r){var t=d(e);return this.startOf(r)<=t&&t<=this.endOf(r)},s.isAfter=function(e,r){return d(e)<this.startOf(r)},s.isBefore=function(e,r){return this.endOf(r)<d(e)},s.$g=function(e,r,t){return c.u(e)?this[r]:this.set(t,e)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(e,r){var t=this,a=!!c.u(r)||r,i=c.p(e),l=function(P,v){var k=c.w(t.$u?Date.UTC(t.$y,v,P):new Date(t.$y,v,P),t);return a?k:k.endOf(b)},f=function(P,v){return c.w(t.toDate()[P].apply(t.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(v)),t)},m=this.$W,g=this.$M,x=this.$D,H="set"+(this.$u?"UTC":"");switch(i){case _:return a?l(1,0):l(31,11);case u:return a?l(1,g):l(0,g+1);case Y:var N=this.$locale().weekStart||0,U=(m<N?m+7:m)-N;return l(a?x-U:x+(6-U),g);case b:case A:return f(H+"Hours",0);case h:return f(H+"Minutes",1);case p:return f(H+"Seconds",2);case M:return f(H+"Milliseconds",3);default:return this.clone()}},s.endOf=function(e){return this.startOf(e,!1)},s.$set=function(e,r){var t,a=c.p(e),i="set"+(this.$u?"UTC":""),l=(t={},t[b]=i+"Date",t[A]=i+"Date",t[u]=i+"Month",t[_]=i+"FullYear",t[h]=i+"Hours",t[p]=i+"Minutes",t[M]=i+"Seconds",t[w]=i+"Milliseconds",t)[a],f=a===b?this.$D+(r-this.$W):r;if(a===u||a===_){var m=this.clone().set(A,1);m.$d[l](f),m.init(),this.$d=m.set(A,Math.min(this.$D,m.daysInMonth())).$d}else l&&this.$d[l](f);return this.init(),this},s.set=function(e,r){return this.clone().$set(e,r)},s.get=function(e){return this[c.p(e)]()},s.add=function(e,r){var t,a=this;e=Number(e);var i=c.p(r),l=function(g){var x=d(a);return c.w(x.date(x.date()+Math.round(g*e)),a)};if(i===u)return this.set(u,this.$M+e);if(i===_)return this.set(_,this.$y+e);if(i===b)return l(1);if(i===Y)return l(7);var f=(t={},t[p]=$,t[h]=O,t[M]=j,t)[i]||1,m=this.$d.getTime()+e*f;return c.w(m,this)},s.subtract=function(e,r){return this.add(-1*e,r)},s.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||z;var a=e||"YYYY-MM-DDTHH:mm:ssZ",i=c.z(this),l=this.$H,f=this.$m,m=this.$M,g=t.weekdays,x=t.months,H=t.meridiem,N=function(v,k,B,E){return v&&(v[k]||v(r,a))||B[k].slice(0,E)},U=function(v){return c.s(l%12||12,v,"0")},P=H||function(v,k,B){var E=v<12?"AM":"PM";return B?E.toLowerCase():E};return a.replace(te,function(v,k){return k||function(B){switch(B){case"YY":return String(r.$y).slice(-2);case"YYYY":return c.s(r.$y,4,"0");case"M":return m+1;case"MM":return c.s(m+1,2,"0");case"MMM":return N(t.monthsShort,m,x,3);case"MMMM":return N(x,m);case"D":return r.$D;case"DD":return c.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return N(t.weekdaysMin,r.$W,g,2);case"ddd":return N(t.weekdaysShort,r.$W,g,3);case"dddd":return g[r.$W];case"H":return String(l);case"HH":return c.s(l,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return P(l,f,!0);case"A":return P(l,f,!1);case"m":return String(f);case"mm":return c.s(f,2,"0");case"s":return String(r.$s);case"ss":return c.s(r.$s,2,"0");case"SSS":return c.s(r.$ms,3,"0");case"Z":return i}return null}(v)||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(e,r,t){var a,i=this,l=c.p(r),f=d(e),m=(f.utcOffset()-this.utcOffset())*$,g=this-f,x=function(){return c.m(i,f)};switch(l){case _:a=x()/12;break;case u:a=x();break;case D:a=x()/3;break;case Y:a=(g-m)/6048e5;break;case b:a=(g-m)/864e5;break;case h:a=g/O;break;case p:a=g/$;break;case M:a=g/j;break;default:a=g}return t?a:c.a(a)},s.daysInMonth=function(){return this.endOf(u).$D},s.$locale=function(){return C[this.$L]},s.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),a=L(e,r,!0);return a&&(t.$L=a),t},s.clone=function(){return c.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},n}(),Z=R.prototype;return d.prototype=Z,[["$ms",w],["$s",M],["$m",p],["$H",h],["$W",b],["$M",u],["$y",_],["$D",A]].forEach(function(n){Z[n[1]]=function(s){return this.$g(s,n[0],n[1])}}),d.extend=function(n,s){return n.$i||(n(s,R,d),n.$i=!0),d},d.locale=L,d.isDayjs=F,d.unix=function(n){return d(1e3*n)},d.en=C[I],d.Ls=C,d.p={},d})}(V)),V.exports}var De=we();const Se=ne(De),je=y.lazy(()=>he(()=>import("./index-54ZA-14y.js"),__vite__mapDeps([0,1,2,3])));function Oe(){const S=y.useRef(null),[T,j]=y.useState(!1),[$,O]=y.useState("table"),[w,M]=y.useState([]);return y.useEffect(()=>{p();async function p(){try{if(!ae())return;const h=await ie();if(!(h!=null&&h.ok))throw new Error(`Request status: ${h==null?void 0:h.status} | ${h==null?void 0:h.statusText}`);await(h==null?void 0:h.json())&&M(fe)}catch(h){console.error(`[Request: ${h.name}] ${h.message}`)}}},[]),o.jsxs("div",{className:"pt-14 sm:pl-[56px]",children:[o.jsxs("header",{className:"flex bg-white h-14 relative justify-center items-center sm:h-18",children:[o.jsx("h1",{className:"font-semibold text-xl sm:text-2x",children:"Active Users"}),o.jsx(ue,{ref:S,component:"button",className:"!absolute top-2/4 right-2 -translate-y-6/12",onClick:()=>j(!T),children:o.jsx(de,{})}),o.jsxs(ce,{anchorEl:S.current,open:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:()=>{console.log("close menu"),j(!1)},children:[o.jsxs(G,{className:Q({"!bg-blue-600 !text-white":$==="table"}),onClick:()=>O("table"),children:[o.jsx(me,{className:"mr-2"}),"Table View"]}),o.jsxs(G,{className:Q({"!bg-blue-600 !text-white":$==="chart"}),onClick:()=>O("chart"),children:[o.jsx($e,{className:"mr-2"}),"Chart View"]})]})]}),o.jsxs("main",{className:"flex justify-center py-9 px-1 sm:px-3",children:[$==="table"&&o.jsx(_e,{activeUsers:w}),o.jsx(y.Suspense,{fallback:o.jsx(oe,{}),children:$==="chart"&&o.jsx(je,{activeUsers:w})})]})]})}function _e({activeUsers:S}){const[T,j]=y.useState("time_bucket"),[$,O]=y.useState("asc"),[w,M]=y.useState(0),[p,h]=y.useState(5),b=[{id:"time_bucket",label:"Time"},{id:"value",label:"Users"}],Y=y.useMemo(()=>[...S].sort((u,D)=>T==="time_bucket"?$==="asc"?Date.parse(u.timeBucket)-Date.parse(D.timeBucket):Date.parse(D.timeBucket)-Date.parse(u.timeBucket):$==="asc"?u.value-D.value:D.value-u.value),[T,$,S]);return o.jsxs(le,{className:"grow-1 drop-shadow-lg",children:[o.jsx(ge,{className:"max-h-[65vh]",children:o.jsxs(ve,{stickyHeader:!0,children:[o.jsx(pe,{children:o.jsx(K,{children:b.map(u=>o.jsx(q,{className:"sm:!text-lg",align:"left",sx:{backgroundColor:"rgb(25, 118, 210)"},children:o.jsx(xe,{sx:{"&.Mui-active":{color:"white"},"& svg":{opacity:1},"&.Mui-active svg":{stroke:"white",fill:"white"}},active:T===u.id,direction:$,onClick:()=>{j(u.id),O($==="asc"?"desc":"asc")},children:u.label})},u.id))})}),o.jsx(ye,{children:Y.slice(w*p,(w+1)*p).map(u=>o.jsxs(K,{className:"hover:!bg-gray-100",children:[o.jsx(q,{align:"left",className:"sm:!text-lg",children:Se(u.timeBucket).format("YYYY-MM-DD (HH:mm:ss)")}),o.jsx(q,{align:"left",className:"sm:!text-lg",children:u.value})]},u.timeBucket))})]})}),o.jsx(Me,{rowsPerPageOptions:[5,10,25],component:"div",rowsPerPage:p,page:w,count:S.length,onPageChange:(u,D)=>M(D),onRowsPerPageChange:u=>{h(+u.target.value),M(0)}})]})}export{Oe as default};
