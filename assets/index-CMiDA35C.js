import{e as ht,o as ct,h as dt,V as R,j as h,W as c,X as ut,s as gt,r as _,J as mt,P as pt}from"./index-DAg2d9CY.js";import{f as At,g as wt,u as it,X as M,q as Pt,r as xt,L as yt,Y as lt,Z as Ct,E as bt,_ as ft,v as kt,w as St,m as $t,n as It,x as vt,y as Bt,$ as Mt,H as jt,I as Lt,J as Rt,K as Ot,M as _t,N as Tt,O as Wt,P as Dt,Q as Et,R as Ht,S as Xt,T as Ut,U as Ft,V as Yt,W as Gt}from"./ChartsWrapper-BPrwJMUA.js";wt("bar");const Nt=At("bar");function zt(){return Nt()}function Kt(t,e){const a=M(t.x,e.x),i=M(t.y,e.y),n=M(t.width,e.width),s=M(t.height,e.height);return r=>({x:a(r),y:i(r),width:n(r),height:s(r)})}function Vt(t){const e={x:t.layout==="vertical"?t.x:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y,width:t.layout==="vertical"?t.width:0,height:t.layout==="vertical"?0:t.height};return it({x:t.x,y:t.y,width:t.width,height:t.height},{createInterpolator:Kt,applyProps(a,i){a.setAttribute("x",i.x.toString()),a.setAttribute("y",i.y.toString()),a.setAttribute("width",i.width.toString()),a.setAttribute("height",i.height.toString())},transformProps:a=>a,initialProps:e,skip:t.skipAnimation,ref:t.ref})}function Zt(t,e){const a=M(t.x,e.x),i=M(t.y,e.y),n=M(t.width,e.width),s=M(t.height,e.height);return r=>({x:a(r),y:i(r),width:n(r),height:s(r)})}function Jt(t){const e={x:t.layout==="vertical"?t.x+t.width/2:t.xOrigin,y:t.layout==="vertical"?t.yOrigin:t.y+t.height/2,width:t.width,height:t.height},a={x:t.x+t.width/2,y:t.y+t.height/2,width:t.width,height:t.height};return it(a,{createInterpolator:Zt,transformProps:i=>i,applyProps(i,n){i.setAttribute("x",n.x.toString()),i.setAttribute("y",n.y.toString()),i.setAttribute("width",n.width.toString()),i.setAttribute("height",n.height.toString())},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function qt(t){return dt("MuiBarElement",t)}const Qt=ht("MuiBarElement",["root","highlighted","faded","series"]),te=t=>{const{classes:e,id:a,isHighlighted:i,isFaded:n}=t,s={root:["root",`series-${a}`,i&&"highlighted",n&&"faded"]};return ct(s,qt,e)},ee=["ownerState","skipAnimation","id","dataIndex","xOrigin","yOrigin"];function ie(t){const{ownerState:e}=t,a=R(t,ee),i=Vt(t);return h.jsx("rect",c({},a,{filter:e.isHighlighted?"brightness(120%)":void 0,opacity:e.isFaded?.3:1},i))}const ae=["id","dataIndex","classes","color","slots","slotProps","style","onClick","skipAnimation","layout","x","xOrigin","y","yOrigin","width","height"];function se(t){const{id:e,dataIndex:a,classes:i,color:n,slots:s,slotProps:r,style:o,onClick:u,skipAnimation:b,layout:d,x:l,xOrigin:m,y,yOrigin:g,width:$,height:I}=t,C=R(t,ae),k=Pt({type:"bar",seriesId:e,dataIndex:a}),{isFaded:f,isHighlighted:p}=xt({seriesId:e,dataIndex:a}),A={id:e,dataIndex:a,classes:i,color:n,isFaded:f,isHighlighted:p},w=te(A),j=(s==null?void 0:s.bar)??ie,v=ut({elementType:j,externalSlotProps:r==null?void 0:r.bar,externalForwardedProps:C,additionalProps:c({},k,{id:e,dataIndex:a,color:n,x:l,xOrigin:m,y,yOrigin:g,width:$,height:I,style:o,onClick:u,cursor:u?"pointer":"unset",stroke:"none",fill:n,skipAnimation:b,layout:d}),className:w.root,ownerState:A});return h.jsx(j,c({},v))}const z=(t,{hasNegative:e,hasPositive:a,borderRadius:i,layout:n})=>{if(!i)return 0;const s=n==="vertical";return t==="top-left"&&(s&&a||!s&&e)||t==="top-right"&&(s&&a||!s&&a)||t==="bottom-right"&&(s&&e||!s&&a)||t==="bottom-left"&&(s&&e||!s&&e)?i:0},ne=["maskId","x","y","width","height","skipAnimation"];function re(t,e,a){const i=c({},a,{borderRadius:e}),n=Math.min(t,z("top-left",i)),s=Math.min(t,z("top-right",i)),r=Math.min(t,z("bottom-right",i)),o=Math.min(t,z("bottom-left",i));return`inset(0px round ${n}px ${s}px ${r}px ${o}px)`}function oe(t,e){const a=M(t.x,e.x),i=M(t.y,e.y),n=M(t.width,e.width),s=M(t.height,e.height),r=M(t.borderRadius,e.borderRadius);return o=>({x:a(o),y:i(o),width:n(o),height:s(o),borderRadius:r(o)})}function le(t){const e={x:t.x,y:t.y+(t.ownerState.layout==="vertical"?t.height:0),width:t.ownerState.layout==="vertical"?t.width:0,height:t.ownerState.layout==="vertical"?0:t.height,borderRadius:t.borderRadius};return it({x:t.x,y:t.y,width:t.width,height:t.height,borderRadius:t.borderRadius},{createInterpolator:oe,transformProps:a=>({x:a.x,y:a.y,width:a.width,height:a.height,style:{clipPath:re(t.ownerState.layout==="vertical"?a.height:a.width,a.borderRadius,t.ownerState)}}),applyProps(a,i){a.setAttribute("x",i.x.toString()),a.setAttribute("y",i.y.toString()),a.setAttribute("width",i.width.toString()),a.setAttribute("height",i.height.toString()),a.style.clipPath=i.style.clipPath},initialProps:e,skip:t.skipAnimation,ref:t.ref})}function he(t){const e=le(c({},t,{borderRadius:t.ownerState.borderRadius??0}));return h.jsx("rect",c({},e))}function ce(t){const{maskId:e,x:a,y:i,width:n,height:s,skipAnimation:r}=t,o=R(t,ne);return!t.borderRadius||t.borderRadius<=0?null:h.jsx("clipPath",{id:e,children:h.jsx(he,{ownerState:o,x:a,y:i,width:n,height:s,skipAnimation:r})})}function de(t){return dt("MuiBarLabel",t)}const Q=ht("MuiBarLabel",["root","highlighted","faded","animate"]),ue=t=>{const{classes:e,seriesId:a,isFaded:i,isHighlighted:n,skipAnimation:s}=t,r={root:["root",`series-${a}`,n&&"highlighted",i&&"faded",!s&&"animate"]};return ct(r,de,e)},ge=t=>{const{barLabel:e,value:a,dataIndex:i,seriesId:n,height:s,width:r}=t;return e==="value"?a?a==null?void 0:a.toString():null:e({seriesId:n,dataIndex:i,value:a},{bar:{height:s,width:r}})},xe=["seriesId","dataIndex","color","isFaded","isHighlighted","classes","skipAnimation","layout","xOrigin","yOrigin"],ye=gt("text",{name:"MuiBarLabel",slot:"Root",overridesResolver:(t,e)=>[{[`&.${Q.faded}`]:e.faded},{[`&.${Q.highlighted}`]:e.highlighted},e.root]})(({theme:t})=>{var e,a,i,n;return c({},(e=t==null?void 0:t.typography)==null?void 0:e.body2,{stroke:"none",fill:(n=(i=(a=t.vars||t)==null?void 0:a.palette)==null?void 0:i.text)==null?void 0:n.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${Q.faded}`]:{opacity:.3}})});function be(t){const e=yt({props:t,name:"MuiBarLabel"}),a=R(e,xe),i=Jt(e);return h.jsx(ye,c({},a,i))}const fe=["seriesId","classes","color","dataIndex","barLabel","slots","slotProps","xOrigin","yOrigin","x","y","width","height","value","skipAnimation","layout"],me=["ownerState"];function pe(t){const{seriesId:e,classes:a,color:i,dataIndex:n,barLabel:s,slots:r,slotProps:o,xOrigin:u,yOrigin:b,x:d,y:l,width:m,height:y,value:g,skipAnimation:$,layout:I}=t,C=R(t,fe),{isFaded:k,isHighlighted:f}=xt({seriesId:e,dataIndex:n}),p={seriesId:e,classes:a,color:i,isFaded:k,isHighlighted:f,dataIndex:n,skipAnimation:$,layout:I},A=ue(p),w=(r==null?void 0:r.barLabel)??be,j=ut({elementType:w,externalSlotProps:o==null?void 0:o.barLabel,additionalProps:c({},C,{xOrigin:u,yOrigin:b,x:d,y:l,width:m,height:y,className:A.root}),ownerState:p}),{ownerState:v}=j,T=R(j,me);if(!s)return null;const L=ge({barLabel:s,value:g,dataIndex:n,seriesId:e,height:y,width:m});return L?h.jsx(w,c({},T,v,{children:L})):null}const Ae=["bars","skipAnimation"];function we(t){const{bars:e,skipAnimation:a}=t,i=R(t,Ae);return h.jsx(_.Fragment,{children:e.map(({xOrigin:n,yOrigin:s,x:r,y:o,seriesId:u,dataIndex:b,color:d,value:l,width:m,height:y,layout:g})=>h.jsx(pe,c({seriesId:u,dataIndex:b,value:l,color:d,xOrigin:n,yOrigin:s,x:r,y:o,width:m,height:y,skipAnimation:a??!1,layout:g??"vertical"},i),`${u}-${b}`))})}const tt=(t,e)=>{const a=`${t}-axis`,i=`${t}Axis`;return e===(t==="x"?bt:ft)?`The first \`${i}\``:`The ${a} with id "${e}"`};function Pe(t,e,a,i,n,s,r){const o=n[i],u=r[s],b=t?o:u,d=t?u:o,l=t?i:s,m=t?s:i,y=t?"x":"y",g=t?"y":"x";if(!lt(b))throw new Error(`MUI X Charts: ${tt(y,l)} should be of type "band" to display the bar series of id "${e}".`);if(b.data===void 0)throw new Error(`MUI X Charts: ${tt(y,l)} should have data property.`);if(lt(d)||Ct(d))throw new Error(`MUI X Charts: ${tt(g,m)} should be a continuous type to display the bar series of id "${e}".`)}const Ce=["skipAnimation","onItemClick","borderRadius","barLabel"];function ke({bandWidth:t,numberOfGroups:e,gapRatio:a}){if(a===0)return{barWidth:t/e,offset:0};const i=t/(e+(e-1)*a),n=a*i;return{barWidth:i,offset:n}}const Se=()=>{const t=zt()??{series:{},stackingGroups:[]},e=$t(),a=It(),{series:i,stackingGroups:n}=t,{xAxis:s,xAxisIds:r}=vt(),{yAxis:o,yAxisIds:u}=Bt(),b=r[0],d=u[0],l={};return{completedData:n.flatMap(({ids:y},g)=>{const $=e.left,I=e.left+e.width,C=e.top,k=e.top+e.height;return y.flatMap(f=>{const p=i[f].xAxisId??b,A=i[f].yAxisId??d,w=s[p],j=o[A],v=i[f].layout==="vertical";Pe(v,f,i[f],p,s,A,o);const T=v?w:j,L=w.scale,S=j.scale,K=Mt(i[f],s[p],o[A]),V=T.scale.bandwidth(),{barWidth:E,offset:X}=ke({bandWidth:V,numberOfGroups:n.length,gapRatio:T.barGapRatio}),U=g*(E+X),{stackedData:F,data:Y,layout:Z}=i[f];return T.data.map((W,O)=>{if(Y[O]==null)return null;const G=F[O].map(H=>v?S(H):L(H)),D=Math.round(Math.min(...G)),N=Math.round(Math.max(...G)),J=i[f].stack,x={seriesId:f,dataIndex:O,layout:Z,x:v?L(W)+U:D,y:v?D:S(W)+U,xOrigin:L(0)??0,yOrigin:S(0)??0,height:v?N-D:E,width:v?E:N-D,color:K(O),value:Y[O],maskId:`${a}_${J||f}_${g}_${O}`};if(x.x>I||x.x+x.width<$||x.y>k||x.y+x.height<C)return null;l[x.maskId]||(l[x.maskId]={id:x.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:x.layout,xOrigin:L(0),yOrigin:S(0),x:0,y:0});const P=l[x.maskId];return P.width=x.layout==="vertical"?x.width:P.width+x.width,P.height=x.layout==="vertical"?P.height+x.height:x.height,P.x=Math.min(P.x===0?1/0:P.x,x.x),P.y=Math.min(P.y===0?1/0:P.y,x.y),P.hasNegative=P.hasNegative||(x.value??0)<0,P.hasPositive=P.hasPositive||(x.value??0)>0,x}).filter(W=>W!==null)})}),masksData:Object.values(l)}},$e=gt("g",{name:"MuiBarPlot",slot:"Root"})({[`& .${Qt.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}});function Ie(t){const{completedData:e,masksData:a}=Se(),{skipAnimation:i,onItemClick:n,borderRadius:s,barLabel:r}=t,o=R(t,Ce),u=kt(),b=St(u||i),d=!s||s<=0;return h.jsxs($e,{children:[!d&&a.map(({id:l,x:m,y,width:g,height:$,hasPositive:I,hasNegative:C,layout:k})=>h.jsx(ce,{maskId:l,borderRadius:s,hasNegative:C,hasPositive:I,layout:k,x:m,y,width:g,height:$,skipAnimation:b??!1},l)),e.map(({seriesId:l,dataIndex:m,color:y,maskId:g,layout:$,x:I,xOrigin:C,y:k,yOrigin:f,width:p,height:A})=>{const w=h.jsx(se,c({id:l,dataIndex:m,color:y,skipAnimation:b??!1,layout:$??"vertical",x:I,xOrigin:C,y:k,yOrigin:f,width:p,height:A},o,{onClick:n&&(j=>{n(j,{type:"bar",seriesId:l,dataIndex:m})})}),`${l}-${m}`);return d?w:h.jsx("g",{clipPath:`url(#${g})`,children:w},`${l}-${m}`)}),r&&h.jsx(we,c({bars:e,skipAnimation:b,barLabel:r},o))]})}const ve=[jt,Lt,Rt,Ot],Be=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","axisHighlight","grid","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className","hideLegend","showToolbar"],Me=t=>{var H,st,nt,rt,ot;const{xAxis:e,yAxis:a,series:i,width:n,height:s,margin:r,colors:o,dataset:u,sx:b,axisHighlight:d,grid:l,children:m,slots:y,slotProps:g,skipAnimation:$,loading:I,layout:C,onItemClick:k,highlightedItem:f,onHighlightChange:p,borderRadius:A,barLabel:w,className:j}=t,v=R(t,Be),L=`${mt()}-clip-path`,S=C==="horizontal"||C===void 0&&i.some(B=>B.layout==="horizontal"),K=_.useMemo(()=>[{id:bt,scaleType:"band",data:Array.from({length:Math.max(...i.map(B=>(B.data??u??[]).length))},(B,q)=>q)}],[u,i]),V=_.useMemo(()=>[{id:ft,scaleType:"band",data:Array.from({length:Math.max(...i.map(B=>(B.data??u??[]).length))},(B,q)=>q)}],[u,i]),E=_.useMemo(()=>i.map(B=>c({type:"bar"},B,{layout:S?"horizontal":"vertical"})),[S,i]),X=S?void 0:K,U=_.useMemo(()=>e?S?e:e.map(B=>c({scaleType:"band"},B)):X,[X,S,e]),F=S?V:void 0,Y=_.useMemo(()=>a?S?a.map(B=>c({scaleType:"band"},B)):a:F,[F,S,a]),Z=c({},v,{series:E,width:n,height:s,margin:r,colors:o,dataset:u,xAxis:U,yAxis:Y,highlightedItem:f,onHighlightChange:p,disableAxisListener:((H=g==null?void 0:g.tooltip)==null?void 0:H.trigger)!=="axis"&&(d==null?void 0:d.x)==="none"&&(d==null?void 0:d.y)==="none",className:j,skipAnimation:$,plugins:ve}),W={onItemClick:k,slots:y,slotProps:g,borderRadius:A,barLabel:w},O={vertical:l==null?void 0:l.vertical,horizontal:l==null?void 0:l.horizontal},at={clipPath:`url(#${L})`},G={id:L},D={slots:y,slotProps:g,loading:I},N={slots:y,slotProps:g},J=c({},S?{y:"band"}:{x:"band"},d),x={slots:y,slotProps:g};return{chartsWrapperProps:{sx:b,legendPosition:(nt=(st=t.slotProps)==null?void 0:st.legend)==null?void 0:nt.position,legendDirection:(ot=(rt=t.slotProps)==null?void 0:rt.legend)==null?void 0:ot.direction},chartContainerProps:Z,barPlotProps:W,gridProps:O,clipPathProps:G,clipPathGroupProps:at,overlayProps:D,chartsAxisProps:N,axisHighlightProps:J,legendProps:x,children:m}},et=_.forwardRef(function(e,a){var f,p,A,w;const i=yt({props:e,name:"MuiBarChart"}),{chartsWrapperProps:n,chartContainerProps:s,barPlotProps:r,gridProps:o,clipPathProps:u,clipPathGroupProps:b,overlayProps:d,chartsAxisProps:l,axisHighlightProps:m,legendProps:y,children:g}=Me(i),{chartDataProviderProps:$,chartsSurfaceProps:I}=_t(s,a),C=((f=i.slots)==null?void 0:f.tooltip)??Tt,k=(p=i.slots)==null?void 0:p.toolbar;return h.jsx(Wt,c({},$,{children:h.jsxs(Dt,c({},n,{children:[i.showToolbar&&k?h.jsx(k,c({},(A=i.slotProps)==null?void 0:A.toolbar)):null,!i.hideLegend&&h.jsx(Et,c({},y)),h.jsxs(Ht,c({},I,{children:[h.jsx(Xt,c({},o)),h.jsxs("g",c({},b,{children:[h.jsx(Ie,c({},r)),h.jsx(Ut,c({},d)),h.jsx(Ft,c({},m))]})),h.jsx(Yt,c({},l)),h.jsx(Gt,c({},u)),g]})),!i.loading&&h.jsx(C,c({},(w=i.slotProps)==null?void 0:w.tooltip))]}))}))});function Re({dailyStoreData:t}){const{locations:e,waitTimes:a,usageRatios:i,staff:n}=t.reduce((s,{locationName:r,metrics:o})=>{const{waitTimeSeconds:u,workForceUtilization:b}=o,{total:d,persons:l}=b;return s.locations.push(r),s.waitTimes.push(u),s.usageRatios.push(d),s.staff.push(l.length),s},{locations:[],waitTimes:[],usageRatios:[],staff:[]});return h.jsxs(pt,{className:"grow-1 drop-shadow-lg",children:[h.jsx(et,{sx:{maxWidth:"800px",margin:"0 auto"},xAxis:[{data:e}],series:[{data:a,label:"Wait time (s)",color:"lightblue"}],height:300,barLabel:"value"}),h.jsx(et,{sx:{maxWidth:"800px",margin:"0 auto"},xAxis:[{data:e}],series:[{data:i,label:"Workforce usage (%)",color:"pink",valueFormatter:s=>`${s}%`}],height:300,barLabel:"value"}),h.jsx(et,{sx:{maxWidth:"800px",margin:"0 auto"},xAxis:[{data:e}],series:[{data:n,label:"Staff",color:"darkseagreen"}],height:300,barLabel:"value"})]})}export{Re as default};
