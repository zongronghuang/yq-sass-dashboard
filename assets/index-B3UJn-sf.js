const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CiSzbB1s.js","assets/index-2R0cosJf.js","assets/index-BB5B0YvN.css","assets/ChartsWrapper-4BZQxJO_.js"])))=>i.map(i=>d[i]);
import{r as s,a as j,d as S,j as e,I as p,M as N,b as g,c as f,G as T,P as k,_ as y}from"./index-2R0cosJf.js";import{j as C,T as P,a as v,B as D,b as R,c as _,d as z,e as w,f as m,g as M,h as E,i as F}from"./index-DTSj5C05.js";const I=s.lazy(()=>y(()=>import("./index-CiSzbB1s.js"),__vite__mapDeps([0,1,2,3])));function O(){const r=s.useRef(null),[l,h]=s.useState(!1),[o,x]=s.useState("table"),[c,d]=s.useState([]);return s.useEffect(()=>{n();async function n(){try{if(!j())return;const a=await S();if(!(a!=null&&a.ok))throw new Error(`Request status: ${a==null?void 0:a.status} | ${a==null?void 0:a.statusText}`);await(a==null?void 0:a.json())&&d(C)}catch(a){console.error(`[Request: ${a.name}] ${a.message}`)}}},[]),e.jsxs("div",{className:"pt-14 sm:pl-[56px]",children:[e.jsxs("header",{className:"flex h-14 bg-white relative justify-center items-center  sm:h-18",children:[e.jsx("h1",{className:"font-semibold text-xl sm:text-2x",children:"Daily Store Sections"}),e.jsx(p,{ref:r,component:"button",className:"!absolute top-2/4 right-2 -translate-y-6/12",onClick:()=>{h(!l)},children:e.jsx(P,{})}),e.jsxs(N,{anchorEl:r.current,open:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:()=>{h(!1)},children:[e.jsxs(g,{className:f({"!bg-blue-600 !text-white":o==="table"}),onClick:()=>x("table"),children:[e.jsx(v,{className:"mr-2"}),"Table View"]}),e.jsxs(g,{className:f({"!bg-blue-600 !text-white":o==="chart"}),onClick:()=>x("chart"),children:[e.jsx(D,{className:"mr-2"}),"Chart View"]})]})]}),e.jsxs("main",{className:"flex justify-center py-9 px-1 sm:px-3",children:[o==="table"&&e.jsx(U,{dailyStoreData:c}),e.jsx(s.Suspense,{fallback:e.jsx(T,{}),children:o==="chart"&&e.jsx(I,{dailyStoreData:c})})]})]})}function U({dailyStoreData:r}){const[l,h]=s.useState("time_bucket"),[o,x]=s.useState("asc"),[c,d]=s.useState(0),[n,a]=s.useState(5),u=[{id:"location",label:"Area"},{id:"wait",label:"Wait(s)"},{id:"total",label:"People"},{id:"staff",label:"Staff"}],b=s.useMemo(()=>[...r].sort((t,i)=>l==="wait"?o==="asc"?t.metrics.waitTimeSeconds-i.metrics.waitTimeSeconds:i.metrics.waitTimeSeconds-t.metrics.waitTimeSeconds:l==="total"?o==="asc"?t.metrics.workForceUtilization.total-i.metrics.workForceUtilization.total:i.metrics.workForceUtilization.total-t.metrics.workForceUtilization.total:0),[l,o,r]);return e.jsxs(k,{className:"grow-1 drop-shadow-lg",children:[e.jsx(R,{sx:{maxHeight:530},children:e.jsxs(_,{stickyHeader:!0,children:[e.jsx(z,{children:e.jsx(w,{children:u.map(t=>e.jsx(m,{className:"sm:!text-lg",align:"left",sx:{backgroundColor:"rgb(25, 118, 210)"},children:["wait","total"].includes(t.id)?e.jsx(M,{sx:{"&.Mui-active":{color:"white"},"& svg":{opacity:1},"&.Mui-active svg":{stroke:"white",fill:"white"}},active:l===t.id,direction:o,onClick:()=>{h(t.id),x(o==="asc"?"desc":"asc")},children:t.label}):t.label},t.id))})}),e.jsx(E,{children:b.slice(c*n,(c+1)*n).map(t=>e.jsxs(w,{className:"hover:!bg-gray-100",children:[e.jsx(m,{align:"left",className:"sm:!text-lg",children:t.locationName}),e.jsx(m,{align:"left",className:"sm:!text-lg",children:t.metrics.waitTimeSeconds}),e.jsx(m,{align:"left",className:"sm:!text-lg",children:t.metrics.workForceUtilization.total}),e.jsx(m,{align:"left",className:"!flex flex-col sm:!text-lg",children:t.metrics.workForceUtilization.persons.map(i=>e.jsxs("span",{children:[i.firstName," ",i.lastName]},i.firstName+i.lastName))})]},t.locationName))})]})}),e.jsx(F,{rowsPerPageOptions:[5,10,25],component:"div",rowsPerPage:n,page:c,count:r.length,onPageChange:(t,i)=>d(i),onRowsPerPageChange:t=>{a(+t.target.value),d(0)}})]})}export{O as default};
